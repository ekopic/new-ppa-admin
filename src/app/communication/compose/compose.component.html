<div class="pl-2 pr-2">
<h1 style="text-align: center">Communications</h1>

<div>
    <div fxLayout="row wrap" style="align-items: center">
        <span fxFlex.gt-sm="10" fxFlex="100">Group: </span>
        <dx-select-box [dataSource]="selectBoxGroups" displayExpr="name" valueExpr="id" [searchEnabled]="true"
            placeholder="Select Group" showClearButton="true" fxFlex.gt-sm="40" fxFlex="100" [(ngModel)]="data.selectedGroup"
            name="data.selectedGroup" (onValueChanged)="groupChanged($event)">
        </dx-select-box>
    </div>
</div>
<br />
<dx-data-grid id="gridContainer" [dataSource]="selectedSource" [showBorders]="true" [showRowLines]="true"
    [allowColumnReordering]="true" [hoverStateEnabled]="true" [wordWrapEnabled]="true" [columnHidingEnabled]="true"
    [allowColumnResizing]="true" [columnResizingMode]="'widget'" (onSelectionChanged)="setSelectedItems($event)">
    <dxo-paging [pageSize]="10"></dxo-paging>
    <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[5, 10, 20]" [showInfo]="true">
    </dxo-pager>
    <dxo-selection mode="multiple"></dxo-selection>
    <dxo-sorting mode="multiple"></dxo-sorting>
    <dxo-column-chooser [enabled]="true" mode="select"></dxo-column-chooser>
    <dxo-column-fixing [enabled]="true"></dxo-column-fixing>
    <dxo-export [enabled]="true" fileName="Users" [allowExportSelectedData]="true"></dxo-export>
    <dxo-group-panel [visible]="true"></dxo-group-panel>
    <dxo-filter-row [visible]="true"></dxo-filter-row>
    <dxo-header-filter [visible]="true"></dxo-header-filter>

    <!-- <dxi-column dataField="firstName"></dxi-column>
        <dxi-column dataField="lastName"></dxi-column>
        <dxi-column dataField="address"></dxi-column>
        <dxi-column dataField="cell"></dxi-column>
        <dxi-column dataField="city"></dxi-column>
        <dxi-column dataField="email"></dxi-column> -->
</dx-data-grid>

<br />
<button mat-raised-button color="primary" (click)="getEmails()">Get Email</button>
<br /><br />
<div>
    <mat-card>
        <mat-card-content>
            <form class="example-form" fxLayout="row wrap">
                <mat-form-field style="width: 50%" class="pb-2">
                    <input type="email" required matInput placeholder="Message From" [formControl]="fromFormControl"
                        [(ngModel)]="data.from">
                    <mat-error *ngIf="fromFormControl.hasError('required')">
                        Message From is <strong>required</strong>!
                    </mat-error>
                </mat-form-field>
            </form>
            <form class="example-form" fxLayout="row wrap">
                <mat-form-field style="width: 100%" class="pb-2">
                    <input required matInput placeholder="To" [formControl]="toFormControl" [(ngModel)]="data.to">
                    <mat-error *ngIf="toFormControl.hasError('required')">
                        Field 'To' is <strong>required</strong>!
                    </mat-error>
                </mat-form-field>
            </form>

            <form class="mt-2 mb-3">
                <label fxFlex="20">Type: </label>
                <mat-checkbox fxFlex="30" name="typeNotification" color="primary" [(ngModel)]="data.typeNotification"
                    [checked]="data.typeNotification" [labelPosition]="'before'">
                    Portal Notification
                </mat-checkbox>
                <mat-checkbox fxFlex="30" name="typeEmail" color="primary" [(ngModel)]="data.typeEmail" [checked]="data.typeEmail"
                    [labelPosition]="'before'">
                    Email
                </mat-checkbox>
            </form>

            <label>Message: </label>
            <quill-editor [(ngModel)]="data.notification"></quill-editor>
            <div class="mt-2">
                <button mat-raised-button color="primary" (click)="sendEmail()">Preview and Send</button>
            </div>
        </mat-card-content>
    </mat-card>
</div>
</div>
<!-- <pre>{{data | json}}</pre> -->